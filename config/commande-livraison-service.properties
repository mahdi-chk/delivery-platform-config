# ============================================
# COMMANDE LIVRAISON SERVICE CONFIGURATION
# ============================================

# Application name
spring.application.name=commande-livraison-service

# Server port
server.port=8082

# ============================================
# MYSQL DATABASE CONFIGURATION
# ============================================

# Database URL
spring.datasource.url=jdbc:mysql://localhost:3306/commande_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true

# Database credentials
spring.datasource.username=root
spring.datasource.password=mahdi

# Driver class
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ============================================
# JPA / HIBERNATE CONFIGURATION
# ============================================

# DDL auto
spring.jpa.hibernate.ddl-auto=update

# Show SQL
spring.jpa.show-sql=true

# Hibernate dialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# Format SQL
spring.jpa.properties.hibernate.format_sql=true

# ============================================
# CONFIGURATION MÉTIER OBLIGATOIRE
# ============================================

# Nombre de jours pour les dernières commandes
mes-config-ms.commandes-last=10

# ============================================
# OPENFEIGN CONFIGURATION
# ============================================

# Connection timeout (ms)
spring.cloud.openfeign.client.config.default.connect-timeout=5000

# Read timeout (ms)
spring.cloud.openfeign.client.config.default.read-timeout=5000

# Logger level
spring.cloud.openfeign.client.config.default.logger-level=full

# ============================================
# RESILIENCE4J CIRCUIT BREAKER
# ============================================

# Taille de la fenêtre glissante
resilience4j.circuitbreaker.instances.restaurantService.sliding-window-size=10

# Seuil de taux d'échec (%)
resilience4j.circuitbreaker.instances.restaurantService.failure-rate-threshold=50

# Temps d'attente en état ouvert (ms)
resilience4j.circuitbreaker.instances.restaurantService.wait-duration-in-open-state=10000

# Nombre d'appels autorisés en semi-ouvert
resilience4j.circuitbreaker.instances.restaurantService.permitted-number-of-calls-in-half-open-state=5

# ============================================
# CONNECTION POOL
# ============================================

spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
