# ============================================
# API GATEWAY CONFIGURATION
# ============================================

# Application name
spring.application.name=gateway-server

# Server port
server.port=8080

# ============================================
# GATEWAY DISCOVERY LOCATOR
# ============================================

# Activer la découverte automatique via Eureka
spring.cloud.gateway.discovery.locator.enabled=true

# Noms de service en minuscules
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# ============================================
# ROUTES CONFIGURATION
# ============================================
# Les routes seront ajoutées au fur et à mesure des sprints

# Route Restaurant Service (Sprint 1)
#spring.cloud.gateway.routes[0].id=restaurant-service
#spring.cloud.gateway.routes[0].uri=lb://restaurant-service
#spring.cloud.gateway.routes[0].predicates[0]=Path=/api/restaurants/**,/api/plats/**

# Route Commande Livraison Service (Sprint 2)
#spring.cloud.gateway.routes[1].id=commande-livraison-service
#spring.cloud.gateway.routes[1].uri=lb://commande-livraison-service
#spring.cloud.gateway.routes[1].predicates[0]=Path=/api/commandes/**,/api/livreurs/**

# Route Delivery API (Sprint 3)
#spring.cloud.gateway.routes[2].id=delivery-api
#spring.cloud.gateway.routes[2].uri=lb://delivery-api
#spring.cloud.gateway.routes[2].predicates[0]=Path=/api/**

# ============================================
# CORS CONFIGURATION
# ============================================

# Origines autorisées (Frontend)
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=http://localhost:4200,http://localhost:3000

# Méthodes HTTP autorisées
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH

# Headers autorisés
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*

# Credentials
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true

# Max age
spring.cloud.gateway.globalcors.cors-configurations.[/**].max-age=3600

# ============================================
# LOGGING
# ============================================

logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.reactor.netty.http.client=DEBUG